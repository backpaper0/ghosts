class: center, middle

# DIコンテナ入門<br/>（裏面）

---

## 自己紹介

- 名前：うらがみ
- SNSアカウント：backpaper0
- 所属企業：TIS株式会社

---

## 概要

裏面と題した本セッションではDIコンテナを支える技術であるバイトコードエンハンスを中心にお話します。

なお、[表面はこちら](https://jjug-cfp.cfapps.io/submissions/a5ba98a8-bad4-4122-bd61-85f89716c81e)。

裏面からもDIコンテナへ入門しましょう！

---

## バイトコードエンハンス

- バイトコード = クラスファイルの中身。JVMが読み取るコード
- エンハンス（enhance） = （能力などを）高める

---

## バイトコード

```java
public class Hello {
    public String say() {
        return "hello world";
    }
}
```

```sh
javac Hello.java
od -x Hello.class
```

---

## バイトコード

.small[
```none
0000000      feca    beba    0000    3700    1100    000a    0004    080d
0000020      0e00    0007    070f    1000    0001    3c06    6e69    7469
0000040      013e    0300    2928    0156    0400    6f43    6564    0001
0000060      4c0f    6e69    4e65    6d75    6562    5472    6261    656c
0000100      0001    7303    7961    0001    2814    4c29    616a    6176
0000120      6c2f    6e61    2f67    7453    6972    676e    013b    0a00
0000140      6f53    7275    6563    6946    656c    0001    480a    6c65
0000160      6f6c    6a2e    7661    0c61    0500    0600    0001    680b
0000200      6c65    6f6c    7720    726f    646c    0001    4805    6c65
0000220      6f6c    0001    6a10    7661    2f61    616c    676e    4f2f
0000240      6a62    6365    0074    0021    0003    0004    0000    0000
0000260      0002    0001    0005    0006    0001    0007    0000    001d
0000300      0001    0001    0000    2a05    00b7    b101    0000    0100
0000320      0800    0000    0600    0100    0000    0100    0100    0900
0000340      0a00    0100    0700    0000    1b00    0100    0100    0000
0000360      0300    0212    00b0    0000    0001    0008    0000    0006
0000400      0001    0000    0003    0001    000b    0000    0002    000c
0000417
```
]


---

## バイトコード

```sh
javap -v Hello.class
```

---

## バイトコード

[ページに収まらないのでGistに貼り付けた](https://gist.githubusercontent.com/backpaper0/9e83ea03b50210b29a0fedbcf7eac783/raw/a22fc706e893893a29572f60f464e204e1e27724/javap_-v_Hello.class.txt)

---

- インターセプター
- 動的にサブクラスが生成される
- スコープとproxy
- コンストラクタとシリアライズ
